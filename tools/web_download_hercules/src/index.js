function _0x4119(){var _0x50d37e=['selectConfiguration','getElementById','1066160YaPENo','usb','H1D03','Flash\x20Write\x20Resp\x20OK.\x20','disconnect','download-flash-process','Disconnect\x20Vllink\x20Sdcard\x20HME','configuration','catch','requestPort','select-file-chip','Chip\x20Deattach','result','close','getUint8','open','4235406knggrO','Failed!!!\x20\x20Chip\x20Flash\x20Write\x20Resp:\x20Unknown\x20','buffer','Flash\x20Write\x20Finish.','chip-name','getPorts','Chip\x20Write\x20Finish.','then','9tYHBfB','acf','chip-probe','auto-probe','versionShow','requestDevice','Chip\x20Write\x20Resp\x20OK.\x20','interfaceNumber_','textContent','2811928sXSXos','data','byteLength','HR02','Failed!!!\x20\x20Chip\x20Write\x20Resp:\x20HERCULES_SUBCMD_RESP_INVALID_COMMON','onload','5HTXUNt','name','change','Failed!!!\x20\x20Flash\x20Write\x20Resp:\x20Unknown\x20','toString','selectAlternateInterface','endpointIn_','New\x20Chip\x20Attach','map','checked','device_','Failed!!!\x20\x20Flash\x20Write\x20Resp:\x20HERCULES_SUBCMD_RESP_INVALID_COMMON','Unknown','pop','auto-verify','toLowerCase','321863sLwRut','17945240sUwWrk','auto-reset','getUint32','onReceiveError','readAsArrayBuffer','click','files','HR03','746325AnlQUf','Connect\x20Vllink\x20Sdcard\x20HME','transferOut','connect','connect-device','download-flash','H1C02','\x20bytes\x20has\x20been\x20written.','set','getUint16','value','addEventListener','length','send','getDevices','1672284yfeQEY','2jJUlpD','disabled','slice','onReceive','Unknown\x20Device','Port','prototype'];_0x4119=function(){return _0x50d37e;};return _0x4119();}var _0x140758=_0x3dfa;function _0x3dfa(_0x510962,_0x208498){var _0x411913=_0x4119();return _0x3dfa=function(_0x3dfa39,_0x5eee3b){_0x3dfa39=_0x3dfa39-0xa6;var _0x2b5ed9=_0x411913[_0x3dfa39];return _0x2b5ed9;},_0x3dfa(_0x510962,_0x208498);}(function(_0x24df3e,_0x4855bb){var _0xdf2858=_0x3dfa,_0x14ca62=_0x24df3e();while(!![]){try{var _0x12915d=-parseInt(_0xdf2858(0xb5))/0x1*(-parseInt(_0xdf2858(0xce))/0x2)+parseInt(_0xdf2858(0xbe))/0x3+parseInt(_0xdf2858(0xcd))/0x4+parseInt(_0xdf2858(0xfe))/0x5*(parseInt(_0xdf2858(0xe7))/0x6)+parseInt(_0xdf2858(0xf8))/0x7+parseInt(_0xdf2858(0xd7))/0x8*(parseInt(_0xdf2858(0xef))/0x9)+-parseInt(_0xdf2858(0xb6))/0xa;if(_0x12915d===_0x4855bb)break;else _0x14ca62['push'](_0x14ca62['shift']());}catch(_0xf09950){_0x14ca62['push'](_0x14ca62['shift']());}}}(_0x4119,0x6a374));var dapv2={};!(function(){'use strict';var _0x167c1d=_0x3dfa;dapv2[_0x167c1d(0xec)]=function(){var _0x2c65ff=_0x167c1d;return navigator[_0x2c65ff(0xd8)][_0x2c65ff(0xcc)]()[_0x2c65ff(0xee)](_0x2960f9=>_0x2960f9[_0x2c65ff(0xad)](_0x11ecd7=>new dapv2[(_0x2c65ff(0xd3))](_0x11ecd7)));},dapv2[_0x167c1d(0xe0)]=function(){var _0x2cec52=_0x167c1d;return navigator['usb'][_0x2cec52(0xf4)]({'filters':[{'vendorId':0x1209,'productId':0x6666}]})['then'](_0x442a0f=>new dapv2[(_0x2cec52(0xd3))](_0x442a0f));},dapv2[_0x167c1d(0xd3)]=function(_0x5e5025){var _0x26fc67=_0x167c1d;this[_0x26fc67(0xaf)]=_0x5e5025,this[_0x26fc67(0xf6)]=0x0,this[_0x26fc67(0xab)]=0x1,this['endpointOut_']=0x1;},dapv2['Port']['prototype']['connect']=function(){var _0x34e100=_0x167c1d;let _0x44d697=()=>{var _0xe5aaa8=_0x3dfa;this[_0xe5aaa8(0xaf)]['transferIn'](this['endpointIn_'],0x200)[_0xe5aaa8(0xee)](_0x1de0f2=>{var _0x461391=_0xe5aaa8;this[_0x461391(0xd1)](_0x1de0f2[_0x461391(0xf9)]),_0x44d697();},_0x5d740b=>{var _0x5e4fff=_0xe5aaa8;this[_0x5e4fff(0xb9)](_0x5d740b);});};return this[_0x34e100(0xaf)][_0x34e100(0xe6)]()[_0x34e100(0xee)](()=>{var _0x2783f2=_0x34e100;if(null===this[_0x2783f2(0xaf)][_0x2783f2(0xde)])return this[_0x2783f2(0xaf)][_0x2783f2(0xd5)](0x1);})[_0x34e100(0xee)](()=>{})[_0x34e100(0xee)](()=>this[_0x34e100(0xaf)]['claimInterface'](this['interfaceNumber_']))[_0x34e100(0xee)](()=>this['device_'][_0x34e100(0xaa)](this[_0x34e100(0xf6)],0x0))[_0x34e100(0xee)](()=>{_0x44d697();});},dapv2[_0x167c1d(0xd3)][_0x167c1d(0xd4)][_0x167c1d(0xdb)]=function(){var _0x257baa=_0x167c1d;this['device_'][_0x257baa(0xe4)]();},dapv2[_0x167c1d(0xd3)][_0x167c1d(0xd4)][_0x167c1d(0xcb)]=function(_0x766fab){var _0x315a0d=_0x167c1d;return this['device_'][_0x315a0d(0xc0)](this['endpointOut_'],_0x766fab);};}());const VENDOR_ID_HERCULES=0x90,HERCULES_SUBCMD_GET_INFO=0x0,HERCULES_SUBCMD_PROBE_CHIP=0x10,HERCULES_SUBCMD_CHIP_WRITE=0x20,HERCULES_SUBCMD_FLASH_WRITE=0x30,HERCULES_SUBCMD_FLASH_READ=0x31,HERCULES_SUBCMD_FLASH_VERIFY=0x32,HERCULES_TARGET_TYPE_M5=0x0,HERCULES_TARGET_TYPE_M7=0x1,HERCULES_TARGET_TYPE_HR02=0x2,HERCULES_TARGET_TYPE_HR03=0x3,HERCULES_TARGET_TYPE_H1D03=0x4,HERCULES_TARGET_TYPE_H1C02=0x5,HERCULES_TARGET_TYPE_P1=0x6,HERCULES_TARGET_TYPE_H3=0x7,HERCULES_TARGET_TYPE_P0=0x8,HERCULES_TARGET_TYPE_UNKNOWN=0x9,HERCULES_OP_READ=0x1,HERCULES_OP_ERASE=0x2,HERCULES_OP_WRITE=0x4,HERCULES_OP_VERIFY=0x8,HERCULES_OP_WRITEQUICK=0x10,HERCULES_OP_DUMP=0x20,HERCULES_OP_AUTORESET=0x40,HERCULES_SUBCMD_RESP_OK=0x0,HERCULES_SUBCMD_RESP_NOT_SUPPORT=0x1,HERCULES_SUBCMD_RESP_INVALID_COMMON=0x2,HERCULES_SUBCMD_RESP_INVALID_HEAD=0x3,HERCULES_SUBCMD_RESP_VERIFY_FAIL=0x4,HERCULES_SUBCMD_RESP_FAIL=0x5;function hercules_cmd_get_info(){var _0x362ca8=new Uint8Array(0x2);return _0x362ca8[0x0]=VENDOR_ID_HERCULES,_0x362ca8[0x1]=HERCULES_SUBCMD_GET_INFO,_0x362ca8;}function hercules_cmd_probe_chip(){var _0x37a135=new Uint8Array(0x2);return _0x37a135[0x0]=VENDOR_ID_HERCULES,_0x37a135[0x1]=HERCULES_SUBCMD_PROBE_CHIP,_0x37a135;}function hercules_cmd_chip_write(_0x24372d,_0x1c24aa,_0x42c4e2,_0x395cb6,_0x392795,_0x3a0654){var _0x250ac3=_0x3dfa,_0x203cd6=new Uint8Array(0x1e+_0x3a0654);_0x203cd6[0x0]=VENDOR_ID_HERCULES,_0x203cd6[0x1]=HERCULES_SUBCMD_CHIP_WRITE,_0x203cd6[_0x250ac3(0xc6)](new Uint8Array(_0x24372d),0x2);var _0xfcbca8=new Uint32Array(0x4);_0xfcbca8[0x0]=_0x42c4e2,_0xfcbca8[0x1]=_0x395cb6,_0xfcbca8[0x2]=_0x392795,_0xfcbca8[0x3]=_0x3a0654,_0x203cd6[_0x250ac3(0xc6)](new Uint8Array(_0xfcbca8[_0x250ac3(0xe9)]),0xe);var _0xc83f09=_0x1c24aa[_0x250ac3(0xd0)](_0x392795,_0x392795+_0x3a0654);return _0x203cd6[_0x250ac3(0xc6)](new Uint8Array(_0xc83f09),0x1e),_0x203cd6;}function hercules_cmd_flash_write(_0x148cdf,_0x27b823,_0x107301,_0x47104a,_0x33d9a3,_0x522a1e,_0x4bdde6){var _0x29920a=_0x3dfa,_0x1f28bf=new Uint8Array(0x22+_0x4bdde6);_0x1f28bf[0x0]=VENDOR_ID_HERCULES,_0x1f28bf[0x1]=HERCULES_SUBCMD_FLASH_WRITE,_0x1f28bf[_0x29920a(0xc6)](new Uint8Array(_0x148cdf),0x2);var _0x45d725=new Uint32Array(0x5);_0x45d725[0x0]=_0x107301,_0x45d725[0x1]=_0x47104a,_0x45d725[0x2]=_0x33d9a3,_0x45d725[0x3]=_0x522a1e,_0x45d725[0x4]=_0x4bdde6,_0x1f28bf[_0x29920a(0xc6)](new Uint8Array(_0x45d725[_0x29920a(0xe9)]),0xe);var _0x389a51=_0x27b823[_0x29920a(0xd0)](_0x522a1e,_0x522a1e+_0x4bdde6);return _0x1f28bf[_0x29920a(0xc6)](new Uint8Array(_0x389a51),0x22),_0x1f28bf;}function hercules_cmd_flash_read(_0x4dc931,_0x56fb50,_0xb53d68,_0x353edc,_0x31d045,_0x56b5e1){var _0x1f135a=_0x3dfa,_0x48d50b=new Uint8Array(0x22);_0x48d50b[0x0]=VENDOR_ID_HERCULES,_0x48d50b[0x1]=HERCULES_SUBCMD_FLASH_READ,_0x48d50b[_0x1f135a(0xc6)](new Uint8Array(_0x4dc931),0x2);var _0x149866=new Uint32Array(0x5);return _0x149866[0x0]=_0x56fb50,_0x149866[0x1]=_0xb53d68,_0x149866[0x2]=_0x353edc,_0x149866[0x3]=_0x31d045,_0x149866[0x4]=_0x56b5e1,_0x48d50b[_0x1f135a(0xc6)](new Uint8Array(_0x149866[_0x1f135a(0xe9)]),0xe),_0x48d50b;}function hercules_cmd_flash_verify(_0x169722,_0xe5c50b,_0x28358a,_0x46dec,_0x1eec0b,_0x483e00,_0x163241){var _0x4e3f75=_0x3dfa,_0x20d2d1=new Uint8Array(0x22+_0x163241);_0x20d2d1[0x0]=VENDOR_ID_HERCULES,_0x20d2d1[0x1]=HERCULES_SUBCMD_FLASH_VERIFY,_0x20d2d1[_0x4e3f75(0xc6)](new Uint8Array(_0x169722),0x2);var _0x2d42de=new Uint32Array(0x5);_0x2d42de[0x0]=_0x28358a,_0x2d42de[0x1]=_0x46dec,_0x2d42de[0x2]=_0x1eec0b,_0x2d42de[0x3]=_0x483e00,_0x2d42de[0x4]=_0x163241,_0x20d2d1[_0x4e3f75(0xc6)](new Uint8Array(_0x2d42de[_0x4e3f75(0xe9)]),0xe);var _0x445149=_0xe5c50b[_0x4e3f75(0xd0)](_0x483e00,_0x483e00+_0x163241);return _0x20d2d1['set'](new Uint8Array(_0x445149),0x22),_0x20d2d1;}let buttonConnectDevice=document['getElementById'](_0x140758(0xc2)),inputVersionShow=document['getElementById'](_0x140758(0xf3)),inputStatusOut=document[_0x140758(0xd6)]('statusOut'),inputChipName=document[_0x140758(0xd6)](_0x140758(0xeb)),inputFlashCapacity=document['getElementById']('flash-capacity'),inputAutoProbe=document[_0x140758(0xd6)](_0x140758(0xf2)),buttonChipProbe=document['getElementById'](_0x140758(0xf1)),inputAutoErase=document[_0x140758(0xd6)]('auto-erase'),inputAutoVerify=document[_0x140758(0xd6)](_0x140758(0xb3)),inputAutoReset=document['getElementById'](_0x140758(0xb7)),buttonSelectFileFlash=document[_0x140758(0xd6)]('select-file-flash'),buttonDownloadFlash=document[_0x140758(0xd6)](_0x140758(0xc3)),processDownloadFlash=document['getElementById'](_0x140758(0xdc)),buttonReadFlash=document[_0x140758(0xd6)]('read-flash'),processReadFlash=document[_0x140758(0xd6)]('read-flash-process'),buttonSelectFileChip=document['getElementById'](_0x140758(0xe1)),buttonDownloadChip=document[_0x140758(0xd6)]('download-chip'),processDownloadChip=document['getElementById']('download-chip-process'),vllinkDevice=null,selectFileFlashWrite=null,selectFileChipWrite=null;var dapPort=null,timeFun=null,dapTaskType=0x0,dapTaskTypePending=0x0,dapTaskPosTx=0x0,dapTaskPosRx=0x0,dapVersion=0x0,dapChipSupportedNum=0x0,dapLastChipAttachMs=0x0,dapHerculesCommonBuf=new Uint8Array(0xc),dapHerculesCommon=new DataView(dapHerculesCommonBuf[_0x140758(0xe9)]),dapHerculesChipValid=!0x1,dapHerculesFlashCapacity=0x0;function uiStatusOut(_0x323904){var _0x21b7f7=_0x140758;inputStatusOut[_0x21b7f7(0xc8)]=_0x323904;}function checkCommonChipValid(){return dapHerculesChipValid;}function checkCommonFlashValid(){return!!dapHerculesFlashCapacity;}function uiClearHerculesCommon(){var _0x1db0bf=_0x140758;dapHerculesCommonBuf[_0x1db0bf(0xc6)](new Uint8Array(0xc),0x0),dapLastChipAttachMs=0x0,dapHerculesChipValid=!0x1,dapHerculesFlashCapacity=0x0,inputChipName[_0x1db0bf(0xc8)]='',inputFlashCapacity['value']='',inputAutoErase[_0x1db0bf(0xcf)]=!0x0,inputAutoVerify[_0x1db0bf(0xcf)]=!0x0,inputAutoReset['disabled']=!0x0,buttonDownloadFlash[_0x1db0bf(0xcf)]=!0x0,buttonReadFlash[_0x1db0bf(0xcf)]=!0x0,buttonDownloadChip[_0x1db0bf(0xcf)]=!0x0;}function uiUpdateHerculesCommon(){var _0x2f6fc7=_0x140758;const _0x261179=dapHerculesCommon[_0x2f6fc7(0xb8)](0x0,!0x0),_0xe95d77=dapHerculesCommon[_0x2f6fc7(0xc7)](0x4,!0x0),_0xe1c9db=dapHerculesCommon[_0x2f6fc7(0xe5)](0x6),_0xc7eedd=dapHerculesCommon[_0x2f6fc7(0xb8)](0x8,!0x0);_0x261179!=dapLastChipAttachMs&&(_0x261179?(uiStatusOut(_0x2f6fc7(0xac)),_0xe95d77&&_0xe1c9db<dapChipSupportedNum?(dapHerculesChipValid=!0x0,dapHerculesFlashCapacity=_0xc7eedd,_0xe1c9db==HERCULES_TARGET_TYPE_M5?inputChipName[_0x2f6fc7(0xc8)]='M5':_0xe1c9db==HERCULES_TARGET_TYPE_M7?inputChipName[_0x2f6fc7(0xc8)]='M7':_0xe1c9db==HERCULES_TARGET_TYPE_HR02?inputChipName['value']=_0x2f6fc7(0xfb):_0xe1c9db==HERCULES_TARGET_TYPE_HR03?inputChipName[_0x2f6fc7(0xc8)]=_0x2f6fc7(0xbd):_0xe1c9db==HERCULES_TARGET_TYPE_H1D03?inputChipName[_0x2f6fc7(0xc8)]=_0x2f6fc7(0xd9):_0xe1c9db==HERCULES_TARGET_TYPE_H1C02?inputChipName[_0x2f6fc7(0xc8)]=_0x2f6fc7(0xc4):_0xe1c9db==HERCULES_TARGET_TYPE_P1?inputChipName[_0x2f6fc7(0xc8)]='P1':_0xe1c9db==HERCULES_TARGET_TYPE_H3?inputChipName['value']='H3':_0xe1c9db==HERCULES_TARGET_TYPE_P0?inputChipName[_0x2f6fc7(0xc8)]='P0':inputChipName[_0x2f6fc7(0xc8)]=_0x2f6fc7(0xb1),inputFlashCapacity[_0x2f6fc7(0xc8)]=(_0xc7eedd/0x400)[_0x2f6fc7(0xa9)](0xa),inputAutoErase[_0x2f6fc7(0xcf)]=!0x1,inputAutoVerify['disabled']=!0x1,inputAutoReset[_0x2f6fc7(0xcf)]=!0x1,selectFileFlashWrite&&checkCommonFlashValid()&&(buttonDownloadFlash[_0x2f6fc7(0xcf)]=!0x1),selectFileChipWrite&&(buttonDownloadChip['disabled']=!0x1)):(uiStatusOut(_0x2f6fc7(0xd2)),dapHerculesChipValid=!0x1,dapHerculesFlashCapacity=0x0,inputChipName[_0x2f6fc7(0xc8)]='',inputFlashCapacity[_0x2f6fc7(0xc8)]='',inputAutoErase[_0x2f6fc7(0xcf)]=!0x0,inputAutoVerify[_0x2f6fc7(0xcf)]=!0x0,inputAutoReset[_0x2f6fc7(0xcf)]=!0x0,buttonDownloadFlash[_0x2f6fc7(0xcf)]=!0x0,buttonReadFlash['disabled']=!0x0,buttonDownloadChip[_0x2f6fc7(0xcf)]=!0x0)):(uiStatusOut(_0x2f6fc7(0xe2)),dapHerculesChipValid=!0x1,dapHerculesFlashCapacity=0x0,inputChipName[_0x2f6fc7(0xc8)]='',inputFlashCapacity[_0x2f6fc7(0xc8)]='',inputAutoErase[_0x2f6fc7(0xcf)]=!0x0,inputAutoVerify['disabled']=!0x0,inputAutoReset[_0x2f6fc7(0xcf)]=!0x0,buttonDownloadFlash[_0x2f6fc7(0xcf)]=!0x0,buttonReadFlash['disabled']=!0x0,buttonDownloadChip[_0x2f6fc7(0xcf)]=!0x0),dapLastChipAttachMs=_0x261179);}function dapTaskUpdateInfo(_0x3f7088){if(!dapTaskType){dapTaskType=0x1;var _0xc9d1bc=hercules_cmd_get_info();_0x3f7088['send'](_0xc9d1bc);}}function dapParseRespUpdateInfo(_0xfaa25f,_0x2453b1,_0x5d873a){var _0x2883ba=_0x140758;0x0==_0x5d873a&&(dapVersion=_0x2453b1['getUint32'](0x4,!0x0),inputVersionShow['value']=dapVersion['toString'](0x10),dapChipSupportedNum=_0x2453b1[_0x2883ba(0xb8)](0x8,!0x0),inputAutoProbe['disabled']=!0x1,buttonChipProbe[_0x2883ba(0xcf)]=!0x1),dapTaskType=0x0;}function dapTaskProbeChip(_0x5e0173){if(!dapTaskType){dapTaskType=0x2;var _0x58eb86=hercules_cmd_probe_chip();_0x5e0173['send'](_0x58eb86);}}function dapParseRespProbeChip(_0x305c5e,_0x2a1a97,_0xfb8729){var _0x232d90=_0x140758;0x0==_0xfb8729&&(dapHerculesCommonBuf[_0x232d90(0xc6)](new Uint8Array(_0x2a1a97['buffer'],0x4,0xc),0x0),uiUpdateHerculesCommon()),dapTaskType=0x0;}function dapTryChipWrite(_0x5e4ed1,_0x2a1f06,_0x102181,_0x1c8c05){var _0x3ce072=_0x140758;if(_0x2a1f06['byteLength']<=_0x1c8c05)uiStatusOut(_0x3ce072(0xed)+_0x1c8c05+_0x3ce072(0xc5)),processDownloadChip[_0x3ce072(0xc8)]=0x64,dapTaskType=0x0,uiClearHerculesCommon();else{if(processDownloadChip[_0x3ce072(0xc8)]=0x64*_0x1c8c05/_0x2a1f06[_0x3ce072(0xfa)],_0x2a1f06['byteLength']>_0x102181){const _0x2998d3=HERCULES_OP_WRITE|HERCULES_OP_WRITEQUICK;var _0x79ea20=_0x2a1f06['byteLength']-_0x102181;_0x79ea20>0x100&&(_0x79ea20=0x100);var _0xbf4dc6=hercules_cmd_chip_write(dapHerculesCommon['buffer'],_0x2a1f06,_0x2998d3,_0x2a1f06['byteLength'],_0x102181,_0x79ea20);return _0x5e4ed1['send'](_0xbf4dc6),_0x79ea20;}}return 0x0;}function dapTaskChipWrite(_0x5cf3af,_0xc11210){var _0x45398b=_0x140758;dapTaskType||(inputAutoProbe[_0x45398b(0xae)]=!0x1,dapTaskType=0x3,dapTaskPosTx=0x0,dapTaskPosTx+=dapTryChipWrite(_0x5cf3af,_0xc11210,dapTaskPosTx,dapTaskPosRx=dapTaskPosTx),dapTaskPosTx+=dapTryChipWrite(_0x5cf3af,_0xc11210,dapTaskPosTx,dapTaskPosRx));}function dapParseRespChipWrite(_0x2d437a,_0x35fcd8,_0x2f8021){var _0x168ae9=_0x140758;if(_0x2f8021==HERCULES_SUBCMD_RESP_INVALID_COMMON)uiStatusOut(_0x168ae9(0xfc)),dapTaskType=0x0;else{if(_0x2f8021==HERCULES_SUBCMD_RESP_OK){const _0x5971ad=_0x35fcd8[_0x168ae9(0xb8)](0x4,!0x0);uiStatusOut(_0x168ae9(0xf5)+(dapTaskPosRx+=_0x5971ad)+_0x168ae9(0xc5)),dapTaskPosTx+=dapTryChipWrite(_0x2d437a,selectFileChipWrite,dapTaskPosTx,dapTaskPosRx);}else uiStatusOut(_0x168ae9(0xe8)+_0x2f8021),dapTaskType=0x0;}}function dapTryFlashWrite(_0x573691,_0x241d83,_0x5cba8d,_0x178b4a,_0x2acd58){var _0x3d3790=_0x140758;if(_0x241d83[_0x3d3790(0xfa)]<=_0x2acd58)uiStatusOut(_0x3d3790(0xea)+_0x2acd58+_0x3d3790(0xc5)),processDownloadFlash[_0x3d3790(0xc8)]=0x64,dapTaskType=0x0,inputAutoReset['checked']&&uiClearHerculesCommon();else{if(processDownloadFlash[_0x3d3790(0xc8)]=0x64*_0x2acd58/_0x241d83[_0x3d3790(0xfa)],_0x241d83[_0x3d3790(0xfa)]>_0x178b4a){var _0x4c5dda=HERCULES_OP_WRITE;inputAutoErase[_0x3d3790(0xae)]&&(_0x4c5dda|=HERCULES_OP_ERASE),inputAutoVerify[_0x3d3790(0xae)]&&(_0x4c5dda|=HERCULES_OP_VERIFY),inputAutoReset[_0x3d3790(0xae)]&&(_0x4c5dda|=HERCULES_OP_AUTORESET);var _0xad4ce5=_0x241d83[_0x3d3790(0xfa)]-_0x178b4a;_0xad4ce5>0x100&&(_0xad4ce5=0x100);var _0x4e42f0=hercules_cmd_flash_write(dapHerculesCommon['buffer'],_0x241d83,_0x4c5dda,_0x241d83[_0x3d3790(0xfa)],_0x5cba8d,_0x178b4a,_0xad4ce5);return _0x573691[_0x3d3790(0xcb)](_0x4e42f0),_0xad4ce5;}}return 0x0;}function dapTaskFlashWrite(_0x28861a,_0x3a8580){var _0xf9a4f9=_0x140758;!dapTaskType&&(inputAutoReset[_0xf9a4f9(0xae)]&&(inputAutoProbe['checked']=!0x1),(dapTaskType=0x4,dapTaskPosTx=0x0,dapTaskPosTx+=dapTryFlashWrite(_0x28861a,_0x3a8580,0x0,dapTaskPosTx,dapTaskPosRx=dapTaskPosTx),dapTaskPosTx+=dapTryFlashWrite(_0x28861a,_0x3a8580,0x0,dapTaskPosTx,dapTaskPosRx)));}function dapParseRespFlashWrite(_0x5af234,_0x3ac648,_0x141b03){var _0x30985a=_0x140758;if(_0x141b03==HERCULES_SUBCMD_RESP_INVALID_COMMON)uiStatusOut(_0x30985a(0xb0)),dapTaskType=0x0;else{if(_0x141b03==HERCULES_SUBCMD_RESP_OK){const _0x3e254b=_0x3ac648[_0x30985a(0xb8)](0x4,!0x0);uiStatusOut(_0x30985a(0xda)+(dapTaskPosRx+=_0x3e254b)+_0x30985a(0xc5)),dapTaskPosTx+=dapTryFlashWrite(_0x5af234,selectFileFlashWrite,0x0,dapTaskPosTx,dapTaskPosRx);}else uiStatusOut(_0x30985a(0xa8)+_0x141b03),dapTaskType=0x0;}}function dapTaskFlashRead(_0x442671,_0x5f1e16){dapTaskType||(dapTaskType=0x5,dapTaskPosTx=0x0);}function dapParseRespFlashRead(_0x4589bf,_0x1529a7,_0x5eae77){dapTaskType=0x0;}function dapTryFlashVerfiy(_0x34aff3,_0x4ab948,_0x14c219){var _0x170350=_0x140758;if(_0x4ab948['byteLength']<=_0x14c219)dapTaskType=0x0;else{const _0x3a547e=HERCULES_OP_VERIFY;var _0x358a8e=_0x4ab948['byteLength']-_0x14c219;_0x358a8e>0x100&&(_0x358a8e=0x100);var _0x3a918e=hercules_cmd_flash_verify(dapHerculesCommon['buffer'],_0x4ab948,_0x3a547e,_0x4ab948['byteLength'],_0x14c219,_0x358a8e);_0x34aff3[_0x170350(0xcb)](_0x3a918e);}}function dapTaskFlashVerfiy(_0x3c43cd,_0x5f2309){dapTaskType||(dapTaskType=0x6,dapTaskPosTx=0x0,dapTryFlashVerfiy(_0x3c43cd,fileData,dapTaskPosTx));}function dapParseRespFlashVerfiy(_0x54e9a0,_0x4140e2,_0x11bb10){var _0x4980d1=_0x140758;if(_0x11bb10==HERCULES_SUBCMD_RESP_INVALID_COMMON)dapTaskType=0x0;else{if(_0x11bb10==HERCULES_SUBCMD_RESP_OK){const _0x4a2198=_0x4140e2[_0x4980d1(0xb8)](0x4,!0x0);dapTaskPosTx+=_0x4a2198,dapTryFlashVerfiy(_0x54e9a0,fileData,dapTaskPosTx);}else dapTaskType=0x0;}}function dapReceiveHandler(_0x25eb10,_0x59571b){var _0x4cbeae=_0x140758;if(_0x59571b[_0x4cbeae(0xe5)](0x0)==VENDOR_ID_HERCULES){const _0x403a56=_0x59571b[_0x4cbeae(0xe5)](0x1),_0x4b8101=_0x59571b['getUint8'](0x2),_0x2d5646=_0x59571b[_0x4cbeae(0xe5)](0x3);0x1==dapTaskType&&_0x403a56==HERCULES_SUBCMD_GET_INFO&&0x0==_0x4b8101?dapParseRespUpdateInfo(_0x25eb10,_0x59571b,_0x2d5646):0x2==dapTaskType&&_0x403a56==HERCULES_SUBCMD_PROBE_CHIP&&0x0==_0x4b8101?dapParseRespProbeChip(_0x25eb10,_0x59571b,_0x2d5646):0x3==dapTaskType&&_0x403a56==HERCULES_SUBCMD_CHIP_WRITE&&0x0==_0x4b8101?dapParseRespChipWrite(_0x25eb10,_0x59571b,_0x2d5646):0x4==dapTaskType&&_0x403a56==HERCULES_SUBCMD_FLASH_WRITE&&0x0==_0x4b8101?dapParseRespFlashWrite(_0x25eb10,_0x59571b,_0x2d5646):0x5==dapTaskType&&_0x403a56==HERCULES_SUBCMD_FLASH_READ&&0x0==_0x4b8101?dapParseRespFlashRead(_0x25eb10,_0x59571b,_0x2d5646):0x6==dapTaskType&&_0x403a56==HERCULES_SUBCMD_FLASH_VERIFY&&0x0==_0x4b8101&&dapParseRespFlashVerfiy(_0x25eb10,_0x59571b,_0x2d5646);}}function connect(){var _0x339717=_0x140758;dapPort[_0x339717(0xc1)]()[_0x339717(0xee)](()=>{var _0x40bae4=_0x339717;buttonConnectDevice[_0x40bae4(0xf7)]=_0x40bae4(0xdd),null!=timeFun&&(clearInterval(timeFun),timeFun=null),dapTaskType=0x0,timeFun=setInterval(function(){var _0x3f81af=_0x40bae4;null!=dapPort&&0x0==dapTaskType&&(0x0==dapVersion?dapTaskUpdateInfo(dapPort):inputAutoProbe[_0x3f81af(0xae)]&&dapTaskProbeChip(dapPort));},0xc8),dapPort[_0x40bae4(0xd1)]=_0x5a4885=>{dapReceiveHandler(dapPort,_0x5a4885);},dapPort['onReceiveError']=_0x1a61b4=>{};},_0x361394=>{});}function getFlashWriteStartPos(_0x4489d7,_0x4d4662,_0xdf675b){var _0x3d3b6d=_0x140758,_0x1fca4b=0x0;if(_0x3d3b6d(0xf0)==_0x4d4662){for(var _0x4e1460=new DataView(_0x4489d7);0x2f2f==_0x4e1460[_0x3d3b6d(0xc7)](_0x1fca4b,!0x0);){for(_0x1fca4b+=0x2;0xa!=_0x4e1460[_0x3d3b6d(0xe5)](_0x1fca4b);)_0x1fca4b+=0x1;_0x1fca4b+=0x1;}_0x1fca4b+=0x8a;}return _0x1fca4b;}function getChipWriteStartPos(_0x12b9bf,_0x47f1f2,_0x13c68a){var _0x2a3c65=getFlashWriteStartPos(_0x12b9bf,_0x47f1f2,_0x13c68a);return _0x13c68a==HERCULES_TARGET_TYPE_H1D03?_0x2a3c65+=0x8:_0x13c68a==HERCULES_TARGET_TYPE_P1?_0x2a3c65+=0x8:_0x13c68a==HERCULES_TARGET_TYPE_H1C02?_0x2a3c65+=0x48:_0x13c68a==HERCULES_TARGET_TYPE_H3?_0x2a3c65+=0x48:_0x13c68a==HERCULES_TARGET_TYPE_P0?_0x2a3c65+=0x48:_0x2a3c65+=0x0,_0x2a3c65;}function initButton(){var _0xe2409f=_0x140758;buttonConnectDevice[_0xe2409f(0xc9)](_0xe2409f(0xbb),async()=>{var _0x36f1be=_0xe2409f;dapPort?(inputAutoProbe[_0x36f1be(0xcf)]=!0x0,buttonChipProbe[_0x36f1be(0xcf)]=!0x0,dapPort[_0x36f1be(0xdb)](),buttonConnectDevice['textContent']=_0x36f1be(0xbf),dapPort=null):dapv2[_0x36f1be(0xe0)]()['then'](_0x15c6e6=>{dapPort=_0x15c6e6,connect();})[_0x36f1be(0xdf)](_0x19a7a8=>{});}),buttonChipProbe[_0xe2409f(0xc9)]('click',async()=>{dapTaskProbeChip(dapPort);}),buttonSelectFileFlash['addEventListener'](_0xe2409f(0xa7),async()=>{var _0x5adb8f=_0xe2409f;if(selectFileFlashWrite=null,buttonDownloadFlash[_0x5adb8f(0xcf)]=!0x0,buttonSelectFileFlash[_0x5adb8f(0xbc)][_0x5adb8f(0xca)]>0x0){let _0x238e6f=buttonSelectFileFlash[_0x5adb8f(0xbc)][0x0],_0x1c6843=new FileReader();_0x1c6843[_0x5adb8f(0xfd)]=function(){var _0x3123e7=_0x5adb8f;if(_0x1c6843['result']){var _0x4e2fbb=getFlashWriteStartPos(_0x1c6843['result'],_0x238e6f[_0x3123e7(0xa6)]['split']('.')[_0x3123e7(0xb2)]()[_0x3123e7(0xb4)](),dapHerculesCommon[_0x3123e7(0xe5)](0x6));selectFileFlashWrite=_0x1c6843['result'][_0x3123e7(0xd0)](_0x4e2fbb),checkCommonFlashValid()&&(buttonDownloadFlash[_0x3123e7(0xcf)]=!0x1);}},_0x1c6843['readAsArrayBuffer'](_0x238e6f);}}),buttonDownloadFlash[_0xe2409f(0xc9)](_0xe2409f(0xbb),async()=>{dapTaskFlashWrite(dapPort,selectFileFlashWrite);}),buttonReadFlash['addEventListener']('click',async()=>{}),buttonSelectFileChip[_0xe2409f(0xc9)](_0xe2409f(0xa7),async()=>{var _0x2ba9f1=_0xe2409f;if(selectFileChipWrite=null,buttonDownloadChip[_0x2ba9f1(0xcf)]=!0x0,buttonSelectFileChip[_0x2ba9f1(0xbc)][_0x2ba9f1(0xca)]>0x0){let _0xe727d4=buttonSelectFileChip[_0x2ba9f1(0xbc)][0x0],_0x45a3c7=new FileReader();_0x45a3c7[_0x2ba9f1(0xfd)]=function(){var _0x55b81e=_0x2ba9f1;if(_0x45a3c7[_0x55b81e(0xe3)]){var _0x5d6f7d=getChipWriteStartPos(_0x45a3c7[_0x55b81e(0xe3)],_0xe727d4[_0x55b81e(0xa6)]['split']('.')[_0x55b81e(0xb2)]()[_0x55b81e(0xb4)](),dapHerculesCommon[_0x55b81e(0xe5)](0x6));selectFileChipWrite=_0x45a3c7[_0x55b81e(0xe3)][_0x55b81e(0xd0)](_0x5d6f7d),checkCommonChipValid()&&(buttonDownloadChip[_0x55b81e(0xcf)]=!0x1);}},_0x45a3c7[_0x2ba9f1(0xba)](_0xe727d4);}}),buttonDownloadChip[_0xe2409f(0xc9)](_0xe2409f(0xbb),async()=>{dapTaskChipWrite(dapPort,selectFileChipWrite);});}((async()=>{initButton();})());